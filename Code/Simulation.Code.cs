if (factory == null)
    Init(context);
else
    Run(context, shape);