<!-- Copyright (c) Wiesław Šoltés. All rights reserved. -->
<!-- Licensed under the MIT license. See LICENSE file in the project root for full license information. -->
<UserControl x:Class="Core2D.Perspex.Controls.Editor.ExporterControl"
             xmlns="https://github.com/perspex"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:local="clr-namespace:Core2D.Perspex;assembly=Core2D.Perspex"
             xmlns:converters="clr-namespace:Core2D.Perspex.Converters;assembly=Core2D.Perspex"
             xmlns:Core="clr-namespace:Core2D;assembly=Core2D"
             xmlns:Data="clr-namespace:Core2D.Data;assembly=Core2D"
             xmlns:Database="clr-namespace:Core2D.Data.Database;assembly=Core2D"
             xmlns:Editor="clr-namespace:Core2D.Editor;assembly=Core2D"
             xmlns:Path="clr-namespace:Core2D.Path;assembly=Core2D"
             xmlns:Segments="clr-namespace:Core2D.Path.Segments;assembly=Core2D"
             xmlns:Project="clr-namespace:Core2D.Project;assembly=Core2D"
             xmlns:Shape="clr-namespace:Core2D.Shape;assembly=Core2D" 
             xmlns:Shapes="clr-namespace:Core2D.Shapes;assembly=Core2D" 
             xmlns:Style="clr-namespace:Core2D.Style;assembly=Core2D" 
             xmlns:data="clr-namespace:Core2D.Perspex.Controls.Data;assembly=Core2D.Perspex"
             xmlns:path="clr-namespace:Core2D.Perspex.Controls.Path;assembly=Core2D.Perspex"
             xmlns:project="clr-namespace:Core2D.Perspex.Controls.Project;assembly=Core2D.Perspex"
             xmlns:shapes="clr-namespace:Core2D.Perspex.Controls.Shapes;assembly=Core2D.Perspex"
             xmlns:state="clr-namespace:Core2D.Perspex.Controls.State;assembly=Core2D.Perspex"
             xmlns:style="clr-namespace:Core2D.Perspex.Controls.Style;assembly=Core2D.Perspex"
             Design.DataContext="{Static Designer:DesignerContext.Editor}"
             Design.Width="1000" Design.Height="600">
        <TabControl Classes="top">
            <TabItem Header="Styles" Classes="property">
                <Grid ColumnDefinitions="250,Auto,*" RowDefinitions="*">
                    <TreeView Name="styles" Items="{Binding Project.StyleLibraries, Mode=TwoWay}" Classes="xaml" Grid.Column="0" Grid.Row="0" Margin="3,3,0,3">
                        <TreeView.KeyBindings>
                            <KeyBinding Command="{Static Editor:Commands.ExportXamlCommand}" CommandParameter="{Binding #styles.SelectedItem}" Gesture="Ctrl+E"/>
                        </TreeView.KeyBindings>
                        <TreeView.ContextMenu>
                            <ContextMenu>
                                <MenuItem Header="E_xport" Command="{Static Editor:Commands.ExportXamlCommand}" CommandParameter="{Binding Mode=OneWay}"/>
                            </ContextMenu>
                        </TreeView.ContextMenu>
                        <TreeView.Styles>
                            <Style Selector="TreeViewItem">
                                <Setter Property="IsExpanded" Value="False"/>
                            </Style>
                        </TreeView.Styles>
                        <TreeView.DataTemplates>
                            <TreeDataTemplate ItemsSource="{Binding Items, Mode=TwoWay}">
                                <TextBlock Text="{Binding Mode=OneWay, Converter={Static converters:ObjectToTypeStringConverter.Instance}}" Classes="default">
                                    <TextBlock.ContextMenu>
                                        <ContextMenu>
                                            <MenuItem Header="E_xport" Command="{Static Editor:Commands.ExportXamlCommand}" CommandParameter="{Binding Mode=OneWay}"/>
                                        </ContextMenu>
                                    </TextBlock.ContextMenu>
                                </TextBlock>
                            </TreeDataTemplate>
                            <DataTemplate DataType="Style:ShapeStyle">
                                <TextBlock Text="{Binding Mode=OneWay, Converter={Static converters:ObjectToTypeStringConverter.Instance}}" Classes="default">
                                    <TextBlock.ContextMenu>
                                        <ContextMenu>
                                            <MenuItem Header="E_xport" Command="{Static Editor:Commands.ExportXamlCommand}" CommandParameter="{Binding Mode=OneWay}"/>
                                        </ContextMenu>
                                    </TextBlock.ContextMenu>
                                </TextBlock>
                            </DataTemplate>
                        </TreeView.DataTemplates>
                    </TreeView>
                    <GridSplitter Classes="vertical" Grid.Column="1" Grid.Row="0" Width="6"/>
                    <TextBox Text="{Binding #styles.SelectedItem, Mode=OneWay, Converter={Static converters:ObjectToXamlStringConverter.Instance}}" Classes="xaml" Grid.Column="2" Grid.Row="0" Margin="0,3,3,3" HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
                        <TextBox.KeyBindings>
                            <KeyBinding Command="{Static Editor:Commands.ExportXamlCommand}" CommandParameter="{Binding #styles.SelectedItem, Mode=OneWay}" Gesture="Ctrl+E"/>
                        </TextBox.KeyBindings>
                        <TextBox.ContextMenu>
                            <ContextMenu>
                                <MenuItem Header="E_xport" Command="{Static Editor:Commands.ExportXamlCommand}" CommandParameter="{Binding #styles.SelectedItem, Mode=OneWay}"/>
                            </ContextMenu>
                        </TextBox.ContextMenu>
                    </TextBox>
                </Grid>
            </TabItem>
            <TabItem Header="Groups" Classes="property">
                <Grid ColumnDefinitions="250,Auto,*" RowDefinitions="*">
                    <TreeView Name="groups" Items="{Binding Project.GroupLibraries, Mode=TwoWay}" Classes="xaml" Grid.Column="0" Grid.Row="0" Margin="3,3,0,3">
                        <TreeView.KeyBindings>
                            <KeyBinding Command="{Static Editor:Commands.ExportXamlCommand}" CommandParameter="{Binding #groups.SelectedItem}" Gesture="Ctrl+E"/>
                        </TreeView.KeyBindings>
                        <TreeView.ContextMenu>
                            <ContextMenu>
                                <MenuItem Header="E_xport" Command="{Static Editor:Commands.ExportXamlCommand}" CommandParameter="{Binding Mode=OneWay}"/>
                            </ContextMenu>
                        </TreeView.ContextMenu>
                        <TreeView.Styles>
                            <Style Selector="TreeViewItem">
                                <Setter Property="IsExpanded" Value="False"/>
                            </Style>
                        </TreeView.Styles>
                        <TreeView.DataTemplates>
                            <TreeDataTemplate ItemsSource="{Binding Items, Mode=TwoWay}">
                                <TextBlock Text="{Binding Mode=OneWay, Converter={Static converters:ObjectToTypeStringConverter.Instance}}" Classes="default">
                                    <TextBlock.ContextMenu>
                                        <ContextMenu>
                                            <MenuItem Header="E_xport" Command="{Static Editor:Commands.ExportXamlCommand}" CommandParameter="{Binding Mode=OneWay}"/>
                                        </ContextMenu>
                                    </TextBlock.ContextMenu>
                                </TextBlock>
                            </TreeDataTemplate>
                            <TreeDataTemplate DataType="Shapes:XGroup" ItemsSource="{Binding Resources, Mode=TwoWay}">
                                <TextBlock Text="{Binding Mode=OneWay, Converter={Static converters:ObjectToTypeStringConverter.Instance}}" Classes="default">
                                    <TextBlock.ContextMenu>
                                        <ContextMenu>
                                            <MenuItem Header="E_xport" Command="{Static Editor:Commands.ExportXamlCommand}" CommandParameter="{Binding Mode=OneWay}"/>
                                        </ContextMenu>
                                    </TextBlock.ContextMenu>
                                </TextBlock>
                            </TreeDataTemplate>
                            <DataTemplate DataType="Core:ObservableObject">
                                <TextBlock Text="{Binding Mode=OneWay, Converter={Static converters:ObjectToTypeStringConverter.Instance}}" Classes="default">
                                    <TextBlock.ContextMenu>
                                        <ContextMenu>
                                            <MenuItem Header="E_xport" Command="{Static Editor:Commands.ExportXamlCommand}" CommandParameter="{Binding Mode=OneWay}"/>
                                        </ContextMenu>
                                    </TextBlock.ContextMenu>
                                </TextBlock>
                            </DataTemplate>
                        </TreeView.DataTemplates>
                    </TreeView>
                    <GridSplitter Classes="vertical" Grid.Column="1" Grid.Row="0" Width="6"/>
                    <TextBox Text="{Binding #groups.SelectedItem, Mode=OneWay, Converter={Static converters:ObjectToXamlStringConverter.Instance}}" Classes="xaml" Grid.Column="2" Grid.Row="0" Margin="0,3,3,3" HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
                        <TextBox.KeyBindings>
                            <KeyBinding Command="{Static Editor:Commands.ExportXamlCommand}" CommandParameter="{Binding #groups.SelectedItem, Mode=OneWay}" Gesture="Ctrl+E"/>
                        </TextBox.KeyBindings>
                        <TextBox.ContextMenu>
                            <ContextMenu>
                                <MenuItem Header="E_xport" Command="{Static Editor:Commands.ExportXamlCommand}" CommandParameter="{Binding #groups.SelectedItem, Mode=OneWay}"/>
                            </ContextMenu>
                        </TextBox.ContextMenu>
                    </TextBox>
                </Grid>
            </TabItem>
            <TabItem Header="Databases" Classes="property">
                <Grid ColumnDefinitions="250,Auto,*" RowDefinitions="*">
                    <ListBox Name="databases" Items="{Binding Project.Databases, Mode=TwoWay}" Classes="xaml" Grid.Column="0" Grid.Row="0" Margin="3,3,0,3">
                        <ListBox.KeyBindings>
                            <KeyBinding Command="{Static Editor:Commands.ExportXamlCommand}" CommandParameter="{Binding #databases.SelectedItem}" Gesture="Ctrl+E"/>
                        </ListBox.KeyBindings>
                        <ListBox.ContextMenu>
                            <ContextMenu>
                                <MenuItem Header="E_xport" Command="{Static Editor:Commands.ExportXamlCommand}" CommandParameter="{Binding Mode=OneWay}"/>
                            </ContextMenu>
                        </ListBox.ContextMenu>
                        <ListBox.DataTemplates>
                            <DataTemplate>
                                <TextBlock Text="{Binding Mode=OneWay, Converter={Static converters:ObjectToTypeStringConverter.Instance}}" Classes="default">
                                    <TextBlock.ContextMenu>
                                        <ContextMenu>
                                            <MenuItem Header="E_xport" Command="{Static Editor:Commands.ExportXamlCommand}" CommandParameter="{Binding Mode=OneWay}"/>
                                        </ContextMenu>
                                    </TextBlock.ContextMenu>
                                </TextBlock>
                            </DataTemplate>
                        </ListBox.DataTemplates>
                    </ListBox>
                    <GridSplitter Classes="vertical" Grid.Column="1" Grid.Row="0" Width="6"/>
                    <TextBox Text="{Binding #databases.SelectedItem, Mode=OneWay, Converter={Static converters:ObjectToXamlStringConverter.Instance}}" Classes="xaml" Grid.Column="2" Grid.Row="0" Margin="0,3,3,3" HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
                        <TextBox.KeyBindings>
                            <KeyBinding Command="{Static Editor:Commands.ExportXamlCommand}" CommandParameter="{Binding #databases.SelectedItem, Mode=OneWay}" Gesture="Ctrl+E"/>
                        </TextBox.KeyBindings>
                        <TextBox.ContextMenu>
                            <ContextMenu>
                                <MenuItem Header="E_xport" Command="{Static Editor:Commands.ExportXamlCommand}" CommandParameter="{Binding #databases.SelectedItem, Mode=OneWay}"/>
                            </ContextMenu>
                        </TextBox.ContextMenu>
                    </TextBox>
                </Grid>
            </TabItem>
            <TabItem Header="Templates" Classes="property">
                <Grid ColumnDefinitions="250,Auto,*" RowDefinitions="*">
                    <ListBox Name="templates" Items="{Binding Project.Templates, Mode=TwoWay}" Classes="xaml" Grid.Column="0" Grid.Row="0" Margin="3,3,0,3">
                        <ListBox.KeyBindings>
                            <KeyBinding Command="{Static Editor:Commands.ExportXamlCommand}" CommandParameter="{Binding #templates.SelectedItem}" Gesture="Ctrl+E"/>
                        </ListBox.KeyBindings>
                        <ListBox.ContextMenu>
                            <ContextMenu>
                                <MenuItem Header="E_xport" Command="{Static Editor:Commands.ExportXamlCommand}" CommandParameter="{Binding Mode=OneWay}"/>
                            </ContextMenu>
                        </ListBox.ContextMenu>
                        <ListBox.DataTemplates>
                            <DataTemplate>
                                <TextBlock Text="{Binding Mode=OneWay, Converter={Static converters:ObjectToTypeStringConverter.Instance}}" Classes="default">
                                    <TextBlock.ContextMenu>
                                        <ContextMenu>
                                            <MenuItem Header="E_xport" Command="{Static Editor:Commands.ExportXamlCommand}" CommandParameter="{Binding Mode=OneWay}"/>
                                        </ContextMenu>
                                    </TextBlock.ContextMenu>
                                </TextBlock>
                            </DataTemplate>
                        </ListBox.DataTemplates>
                    </ListBox>
                    <GridSplitter Classes="vertical" Grid.Column="1" Grid.Row="0" Width="6"/>
                    <TextBox Text="{Binding #templates.SelectedItem, Mode=OneWay, Converter={Static converters:ObjectToXamlStringConverter.Instance}}" Classes="xaml" Grid.Column="2" Grid.Row="0" Margin="0,3,3,3" HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
                        <TextBox.KeyBindings>
                            <KeyBinding Command="{Static Editor:Commands.ExportXamlCommand}" CommandParameter="{Binding #templates.SelectedItem, Mode=OneWay}" Gesture="Ctrl+E"/>
                        </TextBox.KeyBindings>
                        <TextBox.ContextMenu>
                            <ContextMenu>
                                <MenuItem Header="E_xport" Command="{Static Editor:Commands.ExportXamlCommand}" CommandParameter="{Binding #templates.SelectedItem, Mode=OneWay}"/>
                            </ContextMenu>
                        </TextBox.ContextMenu>
                    </TextBox>
                </Grid>
            </TabItem>
            <TabItem Header="Documents" Classes="Templates">
                <Grid ColumnDefinitions="250,Auto,*" RowDefinitions="*">
                    <TreeView Name="documents" Items="{Binding Project.Documents, Mode=TwoWay}" Classes="xaml" Grid.Column="0" Grid.Row="0" Margin="3,3,0,3">
                        <TreeView.KeyBindings>
                            <KeyBinding Command="{Static Editor:Commands.ExportXamlCommand}" CommandParameter="{Binding #documents.SelectedItem}" Gesture="Ctrl+E"/>
                        </TreeView.KeyBindings>
                        <TreeView.ContextMenu>
                            <ContextMenu>
                                <MenuItem Header="E_xport" Command="{Static Editor:Commands.ExportXamlCommand}" CommandParameter="{Binding Mode=OneWay}"/>
                            </ContextMenu>
                        </TreeView.ContextMenu>
                        <TreeView.Styles>
                            <Style Selector="TreeViewItem">
                                <Setter Property="IsExpanded" Value="False"/>
                            </Style>
                        </TreeView.Styles>
                        <TreeView.DataTemplates>
                            <TreeDataTemplate DataType="Project:XDocument" ItemsSource="{Binding Pages, Mode=TwoWay}">
                                <TextBlock Text="{Binding Mode=OneWay, Converter={Static converters:ObjectToTypeStringConverter.Instance}}" Classes="default">
                                    <TextBlock.ContextMenu>
                                        <ContextMenu>
                                            <MenuItem Header="E_xport" Command="{Static Editor:Commands.ExportXamlCommand}" CommandParameter="{Binding Mode=OneWay}"/>
                                        </ContextMenu>
                                    </TextBlock.ContextMenu>
                                </TextBlock>
                            </TreeDataTemplate>
                            <TreeDataTemplate DataType="Project:XPage" ItemsSource="{Binding Layers, Mode=TwoWay}">
                                <TextBlock Text="{Binding Mode=OneWay, Converter={Static converters:ObjectToTypeStringConverter.Instance}}" Classes="default">
                                    <TextBlock.ContextMenu>
                                        <ContextMenu>
                                            <MenuItem Header="E_xport" Command="{Static Editor:Commands.ExportXamlCommand}" CommandParameter="{Binding Mode=OneWay}"/>
                                        </ContextMenu>
                                    </TextBlock.ContextMenu>
                                </TextBlock>
                            </TreeDataTemplate>
                            <TreeDataTemplate DataType="Project:XLayer" ItemsSource="{Binding Shapes, Mode=TwoWay}">
                                <TextBlock Text="{Binding Mode=OneWay, Converter={Static converters:ObjectToTypeStringConverter.Instance}}" Classes="default">
                                    <TextBlock.ContextMenu>
                                        <ContextMenu>
                                            <MenuItem Header="E_xport" Command="{Static Editor:Commands.ExportXamlCommand}" CommandParameter="{Binding Mode=OneWay}"/>
                                        </ContextMenu>
                                    </TextBlock.ContextMenu>
                                </TextBlock>
                            </TreeDataTemplate>
                            <TreeDataTemplate DataType="Shape:BaseShape" ItemsSource="{Binding Resources, Mode=TwoWay}">
                                <TextBlock Text="{Binding Mode=OneWay, Converter={Static converters:ObjectToTypeStringConverter.Instance}}" Classes="default">
                                    <TextBlock.ContextMenu>
                                        <ContextMenu>
                                            <MenuItem Header="E_xport" Command="{Static Editor:Commands.ExportXamlCommand}" CommandParameter="{Binding Mode=OneWay}"/>
                                        </ContextMenu>
                                    </TextBlock.ContextMenu>
                                </TextBlock>
                            </TreeDataTemplate>
                            <DataTemplate DataType="Core:ObservableObject">
                                <TextBlock Text="{Binding Mode=OneWay, Converter={Static converters:ObjectToTypeStringConverter.Instance}}" Classes="default">
                                    <TextBlock.ContextMenu>
                                        <ContextMenu>
                                            <MenuItem Header="E_xport" Command="{Static Editor:Commands.ExportXamlCommand}" CommandParameter="{Binding Mode=OneWay}"/>
                                        </ContextMenu>
                                    </TextBlock.ContextMenu>
                                </TextBlock>
                            </DataTemplate>
                        </TreeView.DataTemplates>
                    </TreeView>
                    <GridSplitter Classes="vertical" Grid.Column="1" Grid.Row="0" Width="6"/>
                    <TextBox Text="{Binding #documents.SelectedItem, Mode=OneWay, Converter={Static converters:ObjectToXamlStringConverter.Instance}}" Classes="xaml" Grid.Column="2" Grid.Row="0" Margin="0,3,3,3" HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
                        <TextBox.KeyBindings>
                            <KeyBinding Command="{Static Editor:Commands.ExportXamlCommand}" CommandParameter="{Binding #documents.SelectedItem, Mode=OneWay}" Gesture="Ctrl+E"/>
                        </TextBox.KeyBindings>
                        <TextBox.ContextMenu>
                            <ContextMenu>
                                <MenuItem Header="E_xport" Command="{Static Editor:Commands.ExportXamlCommand}" CommandParameter="{Binding #documents.SelectedItem, Mode=OneWay}"/>
                            </ContextMenu>
                        </TextBox.ContextMenu>
                    </TextBox>
                </Grid>
            </TabItem>
            <TabItem Header="Options" Classes="property">
                <Grid>
                    <TextBox Text="{Binding Project.Options, Mode=OneWay, Converter={Static converters:ObjectToXamlStringConverter.Instance}}" Classes="xaml" Grid.Column="2" Grid.Row="0" Margin="3" HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
                        <TextBox.KeyBindings>
                            <KeyBinding Command="{Static Editor:Commands.ExportXamlCommand}" CommandParameter="{Binding}" Gesture="Ctrl+E"/>
                        </TextBox.KeyBindings>
                        <TextBox.ContextMenu>
                            <ContextMenu>
                                <MenuItem Header="E_xport" Command="{Static Editor:Commands.ExportXamlCommand}" CommandParameter="{Binding Mode=OneWay}"/>
                            </ContextMenu>
                        </TextBox.ContextMenu>
                    </TextBox>
                </Grid>
            </TabItem>
        </TabControl>
</UserControl>
